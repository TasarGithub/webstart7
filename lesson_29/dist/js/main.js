$(document).ready(function(){var e=$(".modal"),o=$(".modal-thanks"),t=($(".modal__form"),$(".control__form"),$(".footer__form"),$(".control__button"),$(".footer__button"),$('[data-toggle="modal"]')),i=$(".modal-thanks__close"),r=$(".modal__close");document.querySelectorAll('[data-close="modal"]'),document.querySelector(".modal");$('[data-close="modal"]').each(function(e,o){$(o).click(function(e){var o=e.target;$(o).hasClass("modal--visible")&&$(o).removeClass("modal--visible")}),$(document).keydown(function(e){"Escape"===e.code&&$(o).hasClass("modal--visible")&&$(o).removeClass("modal--visible")})}),t.on("click",function(){$("div").is("#glo_vksubscribe")&&($("#glo_vksubscribe").remove(),$(".modal__title").text("Оставьте заявку и наш менеджер свяжется с вами ")),$(".modal__form").css("display","flex"),$(".modal__title").css("display","block"),$(".modal__thanks-block").css("display","none"),$(".modal__form").css("opacity",1),$(".modal__title").css("opacity",1),e.toggleClass("modal--visible")}),r.on("click",function(){e.removeClass("modal--visible")}),i.on("click",function(){o.removeClass("modal-thanks--visible")});let s,l=1;new Swiper(".swiper-container",{loop:!0,pagination:{el:".swiper-pagination",type:"bullets",clickable:!0},navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"}});var n=$(".swiper-button-next"),a=$(".swiper-button-prev"),c=$(".swiper-pagination");function d(e){e.target.playVideo()}n.css("left",a.width()+6+c.width()+32),c.css("left",a.width()+21),(new WOW).init(),$.validator.methods.email=function(e,o){return this.optional(o)||/[A-z0-9._]+@[A-z0-9.-]+\.[a-z]+/.test(e)},$(".modal__form").validate({errorClass:"invalid",errorElement:"div",rules:{userName:{required:!0,minlength:2,maxlength:15},userPhone:{required:!0,minlength:17},userEmail:{required:!0,email:!0},modalPolicyCheckbox:{required:!0}},messages:{userName:{required:"Заполните поле",minlength:"Имя не короче двух букв",maxlength:"Имя не длинее 15ти букв"},userPhone:{required:"Заполните поле",minlength:"Введите корректный телефон"},userEmail:{required:"Заполните поле",email:"Введите корректный email"},modalPolicyCheckbox:{required:"Заполните поле"}},submitHandler:function(e){$.ajax({type:"POST",url:"send.php",data:$(e).serialize(),success:function(e){$(".modal__form").hide(),$("form")[2].reset(),$(".modal__title").text("Форма отправлена"),$(".modal__dialog").append('<div id="glo_vksubscribe"> <script type="text/javascript">VK.Widgets.Group("glo_vksubscribe", {mode: 3, width: "220", no_cover: 1 }, 123083697)<\/script></div>'),$("#glo_vksubscribe").css("height","400px"),$("#glo_vksubscribe").css("width","220px"),ym(62095768,"reachGoal","sendForm")},erorr:function(e){console.error("Ошибка запроса"+e)}})}}),$(".control__form").validate({errorClass:"invalid",errorElement:"div",rules:{userNameControl:{required:!0,minlength:2,maxlength:15},userPhoneControl:{required:!0,minlength:17},userEmailControl:{required:!0,email:!0},controlPolicyCheckbox:{required:!0}},messages:{userNameControl:{required:"Заполните поле",minlength:"Имя не короче двух букв",maxlength:"Имя не длинее 15ти букв"},userPhoneControl:{required:"Заполните поле",minlength:"Введите корректный телефон"},userEmailControl:{required:"Заполните поле",email:"Введите корректный email"},controlPolicyCheckbox:{required:"Заполните поле"}},submitHandler:function(e){$.ajax({type:"POST",url:"send.php",data:$(e).serialize(),success:function(e){o.toggleClass("modal--visible"),$("form")[0].reset(),ym(62095768,"reachGoal","sendForm")}})}}),$(".footer__form").validate({errorClass:"invalid",errorElement:"div",rules:{userNameFooter:{required:!0,minlength:2,maxlength:15},userPhoneFooter:{required:!0,minlength:17},footerPolicyCheckbox:{required:!0}},messages:{userNameFooter:{required:"Заполните поле",minlength:"Имя не короче двух букв",maxlength:"Имя не длинее 15ти букв"},userPhoneFooter:{required:"Заполните поле",minlength:"Введите корректный телефон"},footerPolicyCheckbox:{required:"Заполните поле"}},submitHandler:function(e){$.ajax({type:"POST",url:"send.php",data:$(e).serialize(),success:function(e){$(".footer__form").css("display","none"),$(".footer__title").css("display","none"),$(".footer__thanks-block").css("display","block"),ym(62095768,"reachGoal","sendForm"),l=1,s=requestAnimationFrame(function e(){s=requestAnimationFrame(e),l-=.01,$(".footer__thanks-block").css("opacity")>0?$(".footer__thanks-block").css("opacity",l):(cancelAnimationFrame(s),$("form")[1].reset(),$(".footer__form").css("display","flex"),$(".footer__thanks-block").css("display","none"),$(".footer__title").css("display","block"),$(".footer__thanks-block").css("opacity",1))})}})}}),$("[type=tel]").mask("+7(000) 000-00-00",{placeholder:"+7 (___) ___-__-__"}),$(".video__play").on("click",function(){new YT.Player("player",{height:"465",width:"100%",videoId:"TvVYeLvujLk",events:{onReady:d}})}),function(){const e=document.querySelector(".totop"),o=document.querySelector(".hero");e.style.opacity=0;const t=o.offsetTop;window.addEventListener("scroll",function(){window.pageYOffset>t?e.style.opacity=1:e.style.opacity=0})}(),$("#totop").click(function(){var e=$(document).scrollTop()/1.73;$("body,html").animate({scrollTop:0},e)});const m=new Swiper(".six-step__swiper-container",{loop:!0,pagination:{el:".swiper-pagination",type:"bullets",clickable:!0},navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"}});var u=$(".six-step__swiper-button-next"),_=$(".six-step__swiper-button-prev"),p=$(".six-step__swiper-pagination");u.css("left",_.width()+6+p.width()+32),p.css("left",_.width()+21),$(".six-step__swiper-menu").on("click",".six-step__swiper-menu-item",function(){const e=$(this).data("index");m.slideTo(e)}),m.on("transitionEnd",function(){var e=$("#six-step__first");e.fadeTo(1,0),$("#six-step__first").text(m.realIndex+1),e.fadeTo(700,1),$(".six-step__swiper-menu-item").fadeTo(1,.3),$(".six-step__swiper-menu-item").each(function(e,o){e===m.realIndex&&$(o).fadeTo(700,1)})})});